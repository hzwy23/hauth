(function(h){function q(c){c.debug&&(console.log("callbackIfComplete()"),console.log("totalFiles: "+c.totalFiles),console.log("filesLoaded: "+c.filesLoaded));c.async&&c.filesLoaded===c.totalFiles&&c.callback&&c.callback()}function p(c,a){null!==c&&0<c.length?v(c[0],a,function(){c.shift();p(c,a)}):q(a)}function v(c,a,g){a.debug&&(console.log("loadAndParseFile()"),console.log("totalFiles: "+a.totalFiles),console.log("filesLoaded: "+a.filesLoaded));null!==c&&h.ajax({url:c,async:a.async,cache:a.cache,
dataType:"text",success:function(b,e){a.debug&&console.log("Succeeded in downloading "+c+".");w(b,a);g();q(a)},error:function(b,e,d){a.debug&&console.log("Failed to download or parse "+c+". errorThrown: "+d);404===b.status&&--a.totalFiles;g()}})}function w(c,a){for(var g="",b=c.split(/\n/),e=/(\{\d+})/g,d=/\{(\d+)}/g,m=/(\\u.{4})/ig,k=0,q=b.length;k<q;k++)if(b[k].trim(),b[k]=b[k].trim(),0<b[k].length&&"#"!=b[k].match("^#")){var l=b[k].split("=");if(0<l.length){for(var n=decodeURI(l[0]).trim(),f=1==
l.length?"":l[1];"\\"==f.match(/\\$/);)f=f.substring(0,f.length-1),f+=b[++k].trimRight();for(var r=2;r<l.length;r++)f+="="+l[r];f=f.trim();if("map"==a.mode||"both"==a.mode)(l=f.match(m))&&l.forEach(function(a){f=f.replace(a,x(a))}),h.i18n.map[n]=f;if("vars"==a.mode||"both"==a.mode)if(f=f.replace(/"/g,'\\"'),y(n),e.test(f)){var p=!0,t="",u=[];f.split(e).forEach(function(a){!e.test(a)||0!==u.length&&-1!=u.indexOf(a)||(p||(t+=","),t+=a.replace(d,"v$1"),u.push(a),p=!1)});g+=n+"=function("+t+"){";n='"'+
f.replace(d,'"+v$1+"')+'"';g+="return "+n+";};"}else g+=n+'="'+f+'";'}}eval(g);a.filesLoaded+=1}function y(c){if(/\./.test(c)){var a="";c.split(/\./).forEach(function(c,b){0<b&&(a+=".");a+=c;eval("typeof "+a+' == "undefined"')&&eval(a+"={};")})}}function x(c){var a=[];c=parseInt(c.substr(2),16);0<=c&&c<Math.pow(2,16)&&a.push(c);return a.reduce(function(a,b){return a+String.fromCharCode(b)},"")}h.i18n={};h.i18n.map={};h.i18n.properties=function(c){c=h.extend({name:"Messages",language:"",path:"",mode:"vars",
cache:!1,debug:!1,encoding:"UTF-8",async:!1,callback:null},c);c.language=this.normaliseLanguageCode(c.language);var a=c.name&&c.name.constructor===Array?c.name:[c.name];c.totalFiles=2*a.length+(5<=c.language.length?a.length:0);c.debug&&console.log("totalFiles: "+c.totalFiles);c.filesLoaded=0;a.forEach(function(a){var b,e,d;b=c.path+a+".properties";e=c.language.substring(0,2);e=c.path+a+"_"+e+".properties";5<=c.language.length&&(d=c.language.substring(0,5),d=c.path+a+"_"+d+".properties");p([b,e,d],
c)});c.callback&&!c.async&&c.callback()};h.i18n.prop=function(c){var a=h.i18n.map[c];if(null===a)return"["+c+"]";var g;2==arguments.length&&h.isArray(arguments[1])&&(g=arguments[1]);var b;if("string"==typeof a){for(b=0;-1!=(b=a.indexOf("\\",b));)a="t"==a.charAt(b+1)?a.substring(0,b)+"\t"+a.substring(b++ +2):"r"==a.charAt(b+1)?a.substring(0,b)+"\r"+a.substring(b++ +2):"n"==a.charAt(b+1)?a.substring(0,b)+"\n"+a.substring(b++ +2):"f"==a.charAt(b+1)?a.substring(0,b)+"\f"+a.substring(b++ +2):"\\"==a.charAt(b+
1)?a.substring(0,b)+"\\"+a.substring(b++ +2):a.substring(0,b)+a.substring(b+1);var e=[],d,m;for(b=0;b<a.length;)if("'"==a.charAt(b))if(b==a.length-1)a=a.substring(0,b);else if("'"==a.charAt(b+1))a=a.substring(0,b)+a.substring(++b);else{for(d=b+2;-1!=(d=a.indexOf("'",d));)if(d==a.length-1||"'"!=a.charAt(d+1)){a=a.substring(0,b)+a.substring(b+1,d)+a.substring(d+1);b=d-1;break}else a=a.substring(0,d)+a.substring(++d);-1==d&&(a=a.substring(0,b)+a.substring(b+1))}else"{"==a.charAt(b)?(d=a.indexOf("}",
b+1),-1==d?b++:(m=parseInt(a.substring(b+1,d)),!isNaN(m)&&0<=m?(b=a.substring(0,b),""!==b&&e.push(b),e.push(m),b=0,a=a.substring(d+1)):b=d+1)):b++;""!==a&&e.push(a);a=e;h.i18n.map[c]=e}if(0===a.length)return"";if(1==a.length&&"string"==typeof a[0])return a[0];e="";b=0;for(d=a.length;b<d;b++)e="string"==typeof a[b]?e+a[b]:g&&a[b]<g.length?e+g[a[b]]:!g&&a[b]+1<arguments.length?e+arguments[a[b]+1]:e+("{"+a[b]+"}");return e};h.i18n.normaliseLanguageCode=function(c){if(!c||2>c.length)c=navigator.languages?
navigator.languages[0]:navigator.language||navigator.userLanguage||"en";c=c.toLowerCase();c=c.replace(/-/,"_");3<c.length&&(c=c.substring(0,3)+c.substring(3).toUpperCase());return c}})(jQuery);
